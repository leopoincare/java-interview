## æ•°æ®åº“çš„è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨æ•°æ®åº“äº‹åŠ¡ä¸­ï¼Œ**è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»**æ˜¯ç”¨æ¥æè¿°**å¹¶å‘äº‹åŠ¡ä¸‹æ•°æ®ä¸€è‡´æ€§é—®é¢˜**çš„ä¸‰ä¸ªç»å…¸çŽ°è±¡ï¼Œä¸‹é¢ç”¨**æ¸…æ™° + é¢è¯•å‹å¥½**çš„æ–¹å¼è¯´æ˜Žã€‚

## é¢è¯•ä¸€å¥è¯æ€»ç»“

> **è„è¯»æ˜¯è¯»åˆ°äº†æœªæäº¤çš„æ•°æ®ï¼Œä¸å¯é‡å¤è¯»æ˜¯åŒä¸€è¡Œæ•°æ®å‰åŽè¯»å–ä¸ä¸€è‡´ï¼Œå¹»è¯»æ˜¯åŒä¸€äº‹åŠ¡ä¸­èŒƒå›´æŸ¥è¯¢ç»“æžœé›†å‘ç”Ÿå˜åŒ–ï¼Œæœ¬è´¨åŒºåˆ«åœ¨äºŽæ˜¯å¦æ¶‰åŠæœªæäº¤ã€æ›´æ–°è¡Œè¿˜æ˜¯æ–°å¢ž/åˆ é™¤è¡Œã€‚**

------

## ä¸€ã€è„è¯»ï¼ˆDirty Readï¼‰

### 1ï¸âƒ£ å®šä¹‰

> **ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡å°šæœªæäº¤çš„æ•°æ®ã€‚**

### 2ï¸âƒ£ ä¸¾ä¾‹

```
äº‹åŠ¡ Aï¼šæ›´æ–°ä½™é¢ = 100 â†’ 200ï¼ˆæœªæäº¤ï¼‰
äº‹åŠ¡ Bï¼šè¯»å–ä½™é¢ = 200
äº‹åŠ¡ Aï¼šå›žæ»š
```

ðŸ‘‰ äº‹åŠ¡ B è¯»åˆ°äº†**ä¸å­˜åœ¨çš„æœ€ç»ˆæ•°æ®**

### 3ï¸âƒ£ é—®é¢˜æœ¬è´¨

- è¯»åˆ°äº†â€œè„æ•°æ®â€
- æ•°æ®å¯èƒ½è¢«å›žæ»š

------

## äºŒã€ä¸å¯é‡å¤è¯»ï¼ˆNon-Repeatable Readï¼‰

### 1ï¸âƒ£ å®šä¹‰

> **åŒä¸€ä¸ªäº‹åŠ¡å†…ï¼Œä¸¤æ¬¡è¯»å–åŒä¸€è¡Œæ•°æ®ï¼Œç»“æžœä¸ä¸€è‡´ã€‚**

### 2ï¸âƒ£ ä¸¾ä¾‹

```
äº‹åŠ¡ Aï¼šç¬¬ä¸€æ¬¡è¯»ä½™é¢ = 100
äº‹åŠ¡ Bï¼šæäº¤æ›´æ–°ä½™é¢ = 200
äº‹åŠ¡ Aï¼šç¬¬äºŒæ¬¡è¯»ä½™é¢ = 200
```

ðŸ‘‰ åŒä¸€è¡Œæ•°æ®è¢«**ä¿®æ”¹å¹¶æäº¤**

### 3ï¸âƒ£ é—®é¢˜æœ¬è´¨

- æ•°æ®è¢«å…¶ä»–äº‹åŠ¡ **UPDATE**
- å½±å“çš„æ˜¯**å·²å­˜åœ¨çš„è¡Œ**

------

## ä¸‰ã€å¹»è¯»ï¼ˆPhantom Readï¼‰

### 1ï¸âƒ£ å®šä¹‰

> **åŒä¸€ä¸ªäº‹åŠ¡å†…ï¼Œå¤šæ¬¡æ‰§è¡ŒèŒƒå›´æŸ¥è¯¢ï¼Œç»“æžœé›†è¡Œæ•°å‘ç”Ÿå˜åŒ–ã€‚**

### 2ï¸âƒ£ ä¸¾ä¾‹

```
-- äº‹åŠ¡ A
SELECT * FROM orders WHERE amount > 100;

-- äº‹åŠ¡ B
INSERT INTO orders(amount) VALUES (200);
COMMIT;

-- äº‹åŠ¡ A å†æ¬¡æ‰§è¡Œ
SELECT * FROM orders WHERE amount > 100;
```

ðŸ‘‰ å¤šå‡ºæ¥ä¸€æ¡â€œå¹»å½±â€è®°å½•

### 3ï¸âƒ£ é—®é¢˜æœ¬è´¨

- æ•°æ®è¢« **INSERT / DELETE**
- å½±å“çš„æ˜¯**è¡Œçš„æ•°é‡**

------

## å››ã€ä¸‰è€…å¯¹æ¯”æ€»ç»“ â­â­â­

| é—®é¢˜       | æ˜¯å¦æœªæäº¤ | æ˜¯å¦ä¿®æ”¹åŒä¸€è¡Œ | æ˜¯å¦æ–°å¢ž/åˆ é™¤ |
| ---------- | ---------- | -------------- | ------------- |
| è„è¯»       | âœ…          | âŒ              | âŒ             |
| ä¸å¯é‡å¤è¯» | âŒ          | âœ…              | âŒ             |
| å¹»è¯»       | âŒ          | âŒ              | âœ…             |

------

## äº”ã€äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸Žé—®é¢˜å…³ç³»

| éš”ç¦»çº§åˆ«         | è„è¯» | ä¸å¯é‡å¤è¯» | å¹»è¯»              |
| ---------------- | ---- | ---------- | ----------------- |
| READ UNCOMMITTED | âŒ    | âŒ          | âŒ                 |
| READ COMMITTED   | âœ…    | âŒ          | âŒ                 |
| REPEATABLE READ  | âœ…    | âœ…          | âŒï¼ˆMySQL å¯è§£å†³ï¼‰ |
| SERIALIZABLE     | âœ…    | âœ…          | âœ…                 |

âš ï¸ MySQL InnoDBï¼š

- **RR + Next-Key Lock** å¯è§£å†³å¹»è¯»

------

> 