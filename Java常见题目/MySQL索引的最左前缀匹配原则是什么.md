## MySQL ç´¢å¼•çš„æœ€å·¦å‰ç¼€åŒ¹é…åŽŸåˆ™æ˜¯ä»€ä¹ˆï¼Ÿ

**æœ€å·¦å‰ç¼€åŒ¹é…åŽŸåˆ™**æ˜¯ MySQLï¼ˆä¸»è¦æ˜¯ **InnoDB çš„ B+Tree ç´¢å¼•**ï¼‰ä¸­éžå¸¸æ ¸å¿ƒã€ä¹Ÿæ˜¯é¢è¯•é«˜é¢‘çš„æ¦‚å¿µã€‚ä¸‹é¢ç”¨**é€šä¿— + é¢è¯•å‹å¥½**çš„æ–¹å¼è¯´æ˜Žã€‚

## é¢è¯•ä¸€å¥è¯æ€»ç»“

> **æœ€å·¦å‰ç¼€åŒ¹é…åŽŸåˆ™æŒ‡çš„æ˜¯è”åˆç´¢å¼•åœ¨ B+Tree ä¸­æŒ‰æœ€å·¦åˆ—å¼€å§‹æŽ’åºï¼ŒæŸ¥è¯¢æ¡ä»¶å¿…é¡»ä»Žæœ€å·¦åˆ—è¿žç»­åŒ¹é…ï¼Œé‡åˆ°èŒƒå›´æŸ¥è¯¢æˆ–è·³åˆ—æ—¶ï¼Œç´¢å¼•åŒ¹é…ä¼šåœæ­¢ã€‚**

------

## ä¸€ã€ä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŒ¹é…åŽŸåˆ™ï¼Ÿ

> **ä½¿ç”¨è”åˆç´¢å¼•æ—¶ï¼ŒæŸ¥è¯¢æ¡ä»¶å¿…é¡»ä»Žç´¢å¼•çš„æœ€å·¦åˆ—å¼€å§‹ï¼Œå¹¶ä¸”ä¸èƒ½è·³è¿‡ä¸­é—´åˆ—ï¼Œå¦åˆ™ç´¢å¼•æ— æ³•è¢«å……åˆ†åˆ©ç”¨ã€‚**

å‡è®¾æœ‰è”åˆç´¢å¼•ï¼š

```
INDEX idx_abc (a, b, c)
```

### èƒ½å‘½ä¸­ç´¢å¼•çš„æƒ…å†µ

```
WHERE a = 1
WHERE a = 1 AND b = 2
WHERE a = 1 AND b = 2 AND c = 3
```

### ä¸èƒ½å‘½ä¸­ï¼ˆæˆ–åªèƒ½éƒ¨åˆ†å‘½ä¸­ï¼‰çš„æƒ…å†µ

```
WHERE b = 2
WHERE c = 3
WHERE a = 1 AND c = 3   -- åªèƒ½ç”¨åˆ° a
```

------

## äºŒã€ä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªåŽŸåˆ™ï¼Ÿï¼ˆåº•å±‚åŽŸå› ï¼‰

### 1ï¸âƒ£ B+Tree ç´¢å¼•çš„å­˜å‚¨é¡ºåº

è”åˆç´¢å¼•åœ¨ B+Tree ä¸­çš„æŽ’åºæ–¹å¼æ˜¯ï¼š

```
å…ˆæŒ‰ a æŽ’åº â†’ a ç›¸åŒå†æŒ‰ b â†’ b ç›¸åŒå†æŒ‰ c
```

ç±»ä¼¼å­—å…¸é¡ºåºï¼š

```
(a1, b1, c1)
(a1, b1, c2)
(a1, b2, c1)
(a2, b1, c1)
```

ðŸ‘‰ **åªæœ‰ä»Žæœ€å·¦åˆ—å¼€å§‹ï¼Œæ‰èƒ½å¿«é€Ÿå®šä½èŒƒå›´**

------

## ä¸‰ã€ç­‰å€¼æŸ¥è¯¢ vs èŒƒå›´æŸ¥è¯¢ â­é‡ç‚¹

### 1ï¸âƒ£ ç­‰å€¼æŸ¥è¯¢ï¼ˆ= / INï¼‰

```
WHERE a = 1 AND b = 2 AND c = 3
```

- å¯ä»¥ä¸€ç›´å‘å³åŒ¹é…
- ç´¢å¼•å¯ç”¨åˆ° c

------

### 2ï¸âƒ£ èŒƒå›´æŸ¥è¯¢ï¼ˆ> < BETWEEN LIKE 'x%'ï¼‰

```
WHERE a = 1 AND b > 2 AND c = 3
```

- ç´¢å¼•ä½¿ç”¨åˆ° **b**
- **c æ— æ³•ç»§ç»­ä½¿ç”¨ç´¢å¼•**

ðŸ“Œ è§„åˆ™æ€»ç»“ï¼š

> **é‡åˆ°èŒƒå›´æŸ¥è¯¢ï¼Œç´¢å¼•åŒ¹é…ä¼šåœ¨è¯¥åˆ—ç»ˆæ­¢**

------

## å››ã€LIKE æŸ¥è¯¢çš„ç‰¹æ®Šæƒ…å†µ

### èƒ½ç”¨ç´¢å¼•

```
WHERE name LIKE 'abc%'
```

### ä¸èƒ½ç”¨ç´¢å¼•

```
WHERE name LIKE '%abc'
WHERE name LIKE '%abc%'
```

åŽŸå› ï¼š

- å‰ç¼€ `%` å¯¼è‡´æ— æ³•ä»Žæœ€å·¦å®šä½

------

## äº”ã€ç´¢å¼•åˆ—é¡ºåºä¸ºä»€ä¹ˆå¾ˆé‡è¦ï¼Ÿ

### é”™è¯¯è®¾è®¡

```
INDEX (create_time, user_id)
WHERE user_id = 1001
```

âŒ ç´¢å¼•æ— æ³•ä½¿ç”¨

------

### æ­£ç¡®è®¾è®¡ï¼ˆé«˜é¢‘æ¡ä»¶åœ¨å‰ï¼‰

```
INDEX (user_id, create_time)
```

âœ… å‘½ä¸­ç´¢å¼•

------

## å…­ã€æœ€å·¦å‰ç¼€ â‰  å¿…é¡»æŒ‰é¡ºåºå†™ SQL

ä»¥ä¸‹ **å¯ä»¥ä½¿ç”¨ç´¢å¼•**ï¼š

```
WHERE b = 2 AND a = 1
```

ðŸ‘‰ MySQL ä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨è°ƒæ•´æ¡ä»¶é¡ºåº
 âš ï¸ ä½†**å‰ææ˜¯æ²¡æœ‰è·³åˆ—**

------

## ä¸ƒã€æœ€å·¦å‰ç¼€åŽŸåˆ™æ€»ç»“ï¼ˆé€Ÿè®°ç‰ˆï¼‰

1ï¸âƒ£ è”åˆç´¢å¼•å¿…é¡»ä»Žæœ€å·¦åˆ—å¼€å§‹
 2ï¸âƒ£ ä¸èƒ½è·³è¿‡ä¸­é—´åˆ—
 3ï¸âƒ£ ç­‰å€¼å¯ä¸€ç›´å‘å³
 4ï¸âƒ£ èŒƒå›´æŸ¥è¯¢ä¼šç»ˆæ­¢
 5ï¸âƒ£ LIKE åªæœ‰å‰ç¼€åŒ¹é…æ‰è¡Œ

------

> 