## Java 中有哪些垃圾回收算法

这是 **JVM 面试必考基础题**，考察你是否理解 **不同 GC 算法的思想、优缺点和适用场景**。我按 **算法分类 → 原理 → 优缺点 → 面试总结** 给你系统梳理。

------

## 面试总结一句话

> **Java 垃圾回收算法包括复制、标记-清除、标记-整理和分代收集，新生代多用复制算法，老年代多用标记-整理或标记-清除，以提高回收效率和减少碎片。**

------

## 一、Java 中常见的垃圾回收算法

Java 的垃圾回收算法主要有 **4 大类**：

1. **标记-清除（Mark-Sweep）**
2. **标记-整理（Mark-Compact）**
3. **复制（Copying）**
4. **分代收集（Generational Collection）**

------

## 二、各垃圾回收算法详解

### 1️⃣ 标记-清除（Mark-Sweep）

**原理**

- 标记存活对象
- 清除未标记对象

**优点**

- 实现简单
- 不需要移动对象

**缺点**

- **内存碎片多**
- 可能导致 Full GC
- 效率较低

**使用场景**

- 老年代（早期 GC）

------

### 2️⃣ 标记-整理（Mark-Compact）

**原理**

- 标记存活对象
- 将存活对象向一端移动
- 清理边界外内存

**优点**

- **无内存碎片**
- 内存利用率高

**缺点**

- 对象移动成本高
- STW 时间较长

**使用场景**

- 老年代（Serial Old、Parallel Old）

------

### 3️⃣ 复制算法（Copying）

**原理**

- 将存活对象从一块内存复制到另一块
- 原区域一次性清空

**优点**

- 快
- 无碎片

**缺点**

- **空间浪费**
- 需要预留一半内存

**使用场景**

- 新生代（Eden + Survivor）

------

### 4️⃣ 分代收集算法（Generational）

**原理**

- 根据对象存活周期划分为：
  - 新生代
  - 老年代
- 新生代用复制算法
- 老年代用标记-整理或标记-清除

**优点**

- 符合对象“朝生夕死”特性
- 提高整体 GC 效率

**缺点**

- 实现复杂

**使用场景**

- **JVM 默认采用**

------

## 三、算法与 GC 收集器对应关系（加分）

| 收集器   | 新生代        | 老年代        |
| -------- | ------------- | ------------- |
| Serial   | 复制          | 标记-整理     |
| Parallel | 复制          | 标记-整理     |
| CMS      | 复制          | 标记-清除     |
| G1       | Region 内复制 | 整体标记-整理 |
| ZGC      | 并发标记      | 并发复制      |

------

## 五、面试官常见追问（提前准备）

- ❓ 为什么新生代适合复制算法？
- ❓ CMS 为什么会有内存碎片？
- ❓ G1 和 ZGC 算哪种算法？
- ❓ Full GC 用的是哪种算法？