## JVM 由哪些部分组成

这是 **JVM 基础面试题**，核心是理解 **JVM 的组成与职责**，不要只背“内存区域”，还要知道 **类加载、执行引擎、运行时数据区** 等核心模块。下面我按 **总体结构 → 各组成部分 → 面试总结** 梳理。

------

## 面试总结一句话

> **JVM 主要由类加载子系统、运行时数据区、执行引擎、本地接口和垃圾收集器组成，各部分协作完成 Java 程序加载、执行和内存管理。**

## 一、JVM 的总体组成

JVM 主要由 **三大部分**组成：

```
类加载子系统（Class Loader Subsystem）
运行时数据区（Runtime Data Area）
执行引擎（Execution Engine）
```

补充：

- 本地方法接口（Native Interface / JNI）
- 垃圾收集器（Garbage Collector）

------

## 二、各组成部分详解

### 1️⃣ 类加载子系统（Class Loader Subsystem）

**作用**

- 负责把 `.class` 文件加载到 JVM 内存
- 验证、准备、解析、初始化类

**特点**

- 分为 **启动类加载器、扩展类加载器、应用类加载器**
- 支持 **双亲委派模型** 防止重复加载和保证安全

------

### 2️⃣ 运行时数据区（Runtime Data Area）

**作用**

- JVM 执行程序时使用的内存区域

**组成**

| 区域            | 是否线程私有 | 内容                       | 常见异常           |
| --------------- | ------------ | -------------------------- | ------------------ |
| 程序计数器      | 私有         | 当前执行字节码行号         | 无                 |
| JVM 栈          | 私有         | 栈帧（局部变量、操作数栈） | StackOverflowError |
| 本地方法栈      | 私有         | JNI 方法                   | StackOverflowError |
| Java 堆         | 共享         | 对象实例                   | OutOfMemoryError   |
| 方法区 / 元空间 | 共享         | 类信息、静态变量           | OutOfMemoryError   |
| 直接内存        | 共享（非堆） | NIO Buffer                 | OutOfMemoryError   |

------

### 3️⃣ 执行引擎（Execution Engine）

**作用**

- 执行字节码指令
- 管理方法调用和返回

**组成**

- **解释器（Interpreter）**：逐条解释字节码
- **即时编译器（JIT）**：热点代码编译为本地机器码，提高性能
- **GC 相关组件**：管理堆对象回收

------

### 4️⃣ 本地接口 & 本地库（Native Interface / JNI）

- JVM 调用系统底层功能
- 提供与操作系统、硬件交互能力

------

### 5️⃣ 垃圾收集器（Garbage Collector）

- JVM 内置管理对象生命周期
- 实现 **自动内存回收**
- 常用算法：
  - 标记-清除、标记-整理、复制、分代收集

------

## 三、JVM 结构图示意

```
+----------------------+
|    类加载子系统       |
+----------------------+
| 运行时数据区         |
|  - 程序计数器        |
|  - JVM栈             |
|  - 本地方法栈        |
|  - Java堆            |
|  - 方法区/元空间     |
|  - 直接内存          |
+----------------------+
| 执行引擎             |
|  - 解释器             |
|  - JIT编译器          |
|  - GC                |
+----------------------+
| 本地接口 / 本地库     |
+----------------------+
```

------

> 